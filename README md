# ğŸ¦… DIGIY ABOS Cockpit

Back-office sÃ©curisÃ© de validation des paiements DIGIY (Wave upload).

---

## ğŸ¯ Objectif

Ce cockpit permet :

- ğŸ” Voir les paiements en attente (status = pending)
- ğŸ–¼ Visualiser la preuve (image stockÃ©e Supabase)
- âœ… Valider un paiement
- âŒ Rejeter un paiement
- ğŸ” AccÃ¨s sÃ©curisÃ© via login Supabase (email + mot de passe)

---

## ğŸ“ Structure

/abos/
  â”œâ”€â”€ abos.html
  â””â”€â”€ README.md

---

## ğŸ” SÃ©curitÃ©

- Authentification Supabase (email + mot de passe admin)
- Bucket `pay-proofs` en mode privÃ©
- Preuve affichÃ©e via signed URL (60 secondes)
- RLS activÃ© sur `digiy_pay_orders`

---

## ğŸ—„ Tables utilisÃ©es

### digiy_pay_orders

Champs principaux :

- id (uuid)
- created_at (timestamp)
- plan (text)
- amount (integer)
- proof_path (text)
- status (pending | validated | rejected)
- validated_at (timestamp)

---

## ğŸ”„ Workflow

1. Client upload preuve via page paiement
2. Ligne crÃ©Ã©e dans `digiy_pay_orders` (status = pending)
3. Admin ouvre cockpit ABOS
4. Admin vÃ©rifie preuve
5. Admin clique Valider ou Rejeter
6. Status mis Ã  jour

---

## âš™ï¸ Configuration requise

Dans abos.html :

Remplacer :

const SUPABASE_URL = "..."
const SUPABASE_ANON_KEY = "..."

---

## ğŸš€ DÃ©ploiement

1. DÃ©poser dossier /abos/ sur GitHub Pages
2. CrÃ©er utilisateur admin dans Supabase Auth
3. VÃ©rifier RLS et policies
4. Tester login

---

## ğŸ¦… Philosophie

Ce cockpit est volontairement simple.
Il sÃ©pare :

- Interface client
- Back-office paiement
- Infrastructure technique

Structure claire = systÃ¨me durable.

DIGIY â™¾ï¸
